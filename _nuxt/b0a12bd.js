(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{441:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAXdJREFUOE+llMFVwkAQhmcWE49iBWIFYgVIB5YQwl1IBWIFwN2IHSgdhArUDighVwNvx5mQDXn7NprIXpJMNt/++effRSjGfJX1FakrjZ1NNMLU1NteUT6Yx1mgEFZyTwApIQyjkf/ZFibz8aAMPpj0xfRXDTADBLKh8+f9verQjXMRoq1Gby1/hkYdEkQPY38hC6CGxIYu4ixFhIs61fxnyTT0h6yQuqh32yrABZV5APu+C6iIZlwfsMrLg4cOVXVKXcBl/M024aNGHObAU6FO4CnQWuB/ob8Cm0G9W47I1tjl9pBzhkqvCL1ryZOzUZJFpd84pU+T8bl0Nh9OYLUYjbzEVoqggkl4tl6+ZBw52ExC/641sAo1oZatydHoMrBMSGOFx0hRT+ks4KyJqoHUOcRiTe5ja6AdZt41vT+b4vLQBtU9n6zQBrtjU5yJcmogYt7lpoOIpqZRlb1MXUW7d2N6U1g5r8hmCax0tPaYqlvE5Fbe/wBkbkhNMIxMBAAAAABJRU5ErkJggg=="},442:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAASNJREFUOE/tVLENwkAM/PRIaSiRYAAKNiBswAbABjABYQIYISOwAUlBzwhPR0EBE8Bd8EfJJ/koICQKLJ0+ju2L7XfsqQZ5KBXABcdLPKUSVwjs1QKGEJZ1jXmDQNpL4iJkVndgZ0UtofsIrIytfCllHhBYyiSX+QTBsZ1iSginEY4t0AM6wAXgOy3Ixw2gECfxv4r/AmTaENIhEhIf5xEYCtnNyqIrRCQcA2wLn+cZoQlApjGd6vpjEbMy9jmBf2BshR5+nVB6O8NXV8wAOm88gs4S22eYv1EpqXDzrUv+E7KNH/dwKgPPwadoGeD9W7dsD/JPDHaILLgDWVI6vA7h8mBLChvJ/vXYqxjoN5Ur9jPOgEvB+NftQxITLuGqyoiM4xNtZ4IVyfjpqgAAAABJRU5ErkJggg=="},480:function(e,t,r){var n=r(3),l=r(292).values;n({target:"Object",stat:!0},{values:function(e){return l(e)}})},499:function(e,t,r){"use strict";r.r(t);var n=r(10),l=(r(14),r(480),r(76),{data:function(){return{loading:!1,order:{},visitDate:"",visitTime:"",disabled:!0,statusOptions:[{value:"pending",label:"في انتظار التأكيد"},{value:"accepted",label:"تمت الموافقة"},{value:"rejected",label:"تم الرفض"},{value:"done",label:"تم التسليم"},{value:"inProgress",label:"يتم سحب العينة"}],orderStatus:"",reason:!1,whyRejected:"",clientNotes:"",errorMsg:!1,successMsg:!1}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getOrder();case 2:case"end":return t.stop()}}),t)})))()},methods:{getOrder:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/orders/".concat(e.$route.params.id));case 2:return r=t.sent,t.next=5,r.data;case 5:return e.order=t.sent,t.next=8,r.data.status;case 8:return e.orderStatus=t.sent,t.next=11,r.data.day;case 11:return e.visitDate=t.sent,t.next=14,r.data.timeAttendance;case 14:return e.visitTime=t.sent,t.next=17,r.data.whyRejected;case 17:e.clientNotes=t.sent;case 18:case"end":return t.stop()}}),t)})))()},dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()},deleteOrder:function(){var e=this;this.$confirm("Are you sure you want to this order","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$message({type:"success",message:"Delete completed"}),t.next=3,e.$axios.delete("orders/".concat(e.$route.params.id));case 3:e.$router.push("/orders");case 4:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"Delete canceled"})}))},cancelEdit:function(){this.adminNotes="",this.orderStatus=this.order.status,this.visitDate=this.order.day,this.visitTime=this.order.from,this.disabled=!0,this.errorMsg=!1},saveEdit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.visitDate!=e.order.day&&(e.visitDate=e.visitDate.toISOString()),r={status:e.orderStatus,whyRejected:e.whyRejected||" ",clientNotes:e.clientNotes||" ",timeAttendance:e.visitTime,day:e.visitDate},n=Object.values(r).every((function(e){return e})),console.log(r),!n){t.next=12;break}return t.next=7,e.$axios.patch("/orders/".concat(e.$route.params.id),r);case 7:e.disabled=!0,e.successMsg=!0,e.errorMsg=!1,t.next=13;break;case 12:e.errorMsg=!0;case 13:case"end":return t.stop()}}),t)})))()}}}),c=r(20),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetchState.pending?e._e():n("section",[e.errorMsg?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n    بيانات مفقودة! من فضلك تأكد من ادخال جميع البيانات بشكل صحيح.\n  ")]):e._e(),e._v(" "),e.successMsg?n("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[e._v("\n    تم تعديل الحجز بنجاح .\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"d-flex flex-row-reverse gap-2"},[n("img",{attrs:{src:r(442),alt:"delete icon",role:"button"},on:{click:e.deleteOrder}}),e._v(" "),n("img",{attrs:{src:r(441),alt:"edit icon",role:"button"},on:{click:function(t){e.disabled=!1}}})]),e._v(" "),n("div",{staticClass:"cards mt-3"},[n("div",{staticClass:"card-item card-item--orders w-100 my-2"},[e._m(0),e._v(" "),n("div",{staticClass:"d-flex flex-wrap mx-5 gap-5 w-100"},[n("div",[n("div",{staticClass:"my-2 d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("رقم الحجز")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.id))])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("موعد الحجز")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.dateFormat(e.order.day)))])])]),e._v(" "),n("div",[n("div",{staticClass:"my-2 d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("مكان الحجز")]),e._v(" "),n("h6",{staticClass:"value"},[e._v("\n              "+e._s("internal"==e.order.booking?"في المعمل":"في المنزل")+"\n            ")])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("حالة الحجز")]),e._v(" "),n("h6",{staticClass:"value"},[n("el-select",{attrs:{placeholder:"Select",disabled:e.disabled,required:""},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},e._l(e.statusOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),e._v(" "),"rejected"==e.orderStatus?n("div",[n("el-input",{attrs:{type:"input",placeholder:"سبب الرفض",required:"",disabled:e.disabled},model:{value:e.whyRejected,callback:function(t){e.whyRejected=t},expression:"whyRejected"}})],1):e._e()])])]),e._v(" "),n("div",{staticClass:"card-item card-item--orders w-100 my-2"},[e._m(1),e._v(" "),n("div",{staticClass:"d-flex flex-wrap mx-5 gap-5 w-100"},[n("div",[n("div",{staticClass:"my-2 d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("اسم العميل")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.username))])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("رقم الهاتف")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.phone))])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("تاريخ الزيارة")]),e._v(" "),n("h6",{staticClass:"value"},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{type:"date",disabled:e.disabled||"rejected"==e.orderStatus,required:""},model:{value:e.visitDate,callback:function(t){e.visitDate=t},expression:"visitDate"}})],1)])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("مـــلاحــظــة")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.clientNotes||"لا يوجــد"))])])]),e._v(" "),n("div",[n("div",{staticClass:"my-2 d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("العنوان")]),e._v(" "),n("h6",{staticClass:"value"},[e._v("\n              "+e._s("internal"==e.order.booking?"في المعمل":"في المنزل")+"\n            ")])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("النوع")]),e._v(" "),n("h6",{staticClass:"value"},[e._v("\n              "+e._s("male"==e.order.gender?"ذكر":"انثى")+"\n            ")]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2 me-4"},[n("h6",{staticClass:"key"},[e._v("السن")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.age))])])]),e._v(" "),n("div",{staticClass:"d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("وقت الزيارة")]),e._v(" "),n("h6",{staticClass:"value"},[n("el-time-select",{attrs:{"picker-options":{start:"01:00",step:"00:30",end:"24:00"},disabled:e.disabled||"rejected"==e.orderStatus,required:""},model:{value:e.visitTime,callback:function(t){e.visitTime=t},expression:"visitTime"}})],1)])])])]),e._v(" "),e.order.products.length>0?n("div",{staticClass:"card-item card-item--orders w-100 my-2"},[e._m(2),e._v(" "),n("div",{staticClass:"d-flex flex-wrap mx-5 gap-5 w-100"},[n("div",{staticClass:"my-2 d-flex align-items-center gap-2"},[n("h6",{staticClass:"key"},[e._v("الفحص")]),e._v(" "),n("h6",{staticClass:"value"},[e._v(e._s(e.order.products[0].titleAr))])])])]):e._e(),e._v(" "),n("div",{staticClass:"card-item w-100 my-2"},[n("label",{staticClass:"form-label fw-bold",attrs:{for:"exampleFormControlTextarea1"}},[e._v("ملاحظات للعميل")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.clientNotes,expression:"clientNotes"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3",disabled:e.disabled},domProps:{value:e.clientNotes},on:{input:function(t){t.target.composing||(e.clientNotes=t.target.value)}}})])]),e._v(" "),e.disabled?e._e():n("div",{staticClass:"buttons w-100 p-3 d-flex gap-2 justify-content-end"},[n("button",{staticClass:"secondary-btn w-25 align-self-end",attrs:{type:"submit"},on:{click:e.saveEdit}},[e._v("\n      حفظ\n    ")]),e._v(" "),n("button",{staticClass:"secondary-btn w-25 align-self-end",attrs:{type:"submit"},on:{click:e.cancelEdit}},[e._v("\n      الغاء\n    ")])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"date d-flex"},[r("div",{staticClass:"align-self-center text-center"},[e._v("تفاصيل الحجز")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"date d-flex"},[r("div",{staticClass:"align-self-center text-center"},[e._v("بيانات المعمل")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"date d-flex"},[r("div",{staticClass:"align-self-center text-center"},[e._v("تفاصيل الخدمة")])])}],!1,null,null,null);t.default=component.exports}}]);